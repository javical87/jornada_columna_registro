<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro a la Jornada de Actualización en Patología de Columna</title>
    <!-- Carga de Tailwind CSS para un diseño rápido y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Estilo personalizado para la fuente Inter */
        body {
            font-family: 'Inter', sans-serif;
            /* Fondo de imagen */
            background-image: url('equipo_columna.jpg'); /* Ruta de la imagen */
            background-size: cover; /* Cubre todo el fondo, recortando si es necesario */
            background-position: center center; /* Centra la imagen */
            background-repeat: no-repeat; /* Evita que la imagen se repita */
            background-attachment: fixed; /* Mantiene la imagen fija al hacer scroll */
            
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            overflow-x: hidden; /* Oculta barras de desplazamiento horizontales */
            overflow-y: auto; /* Muestra barra de desplazamiento vertical si el contenido excede la altura */
            position: relative;
        }

        /* Overlay semi-transparente para mejorar la legibilidad del texto sobre el fondo */
        body::before {
            content: '';
            position: fixed; /* Fijo para cubrir toda la ventana */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4); /* Capa oscura semi-transparente */
            z-index: 1; /* Asegura que esté por debajo del contenedor de registro */
        }

        /* Ajuste de la posición de la imagen de fondo para móviles */
        @media (max-width: 768px) {
            body {
                background-position: center top; /* Mueve el foco de la imagen hacia arriba en móviles */
            }
        }

        /* Contenedor principal del formulario de registro */
        .registration-container {
            max-width: 600px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.8); /* Fondo blanco semitransparente */
            border-radius: 1.5rem;
            /* Sombra pronunciada para el efecto de elevación */
            box-shadow: 0 20px 40px rgba(128, 0, 32, 0.3), 0 0 0 1px rgba(128, 0, 32, 0.7); /* Sombra y un borde fino en tono vinotinto */
            padding: 2.5rem;
            text-align: center;
            box-sizing: border-box;
            transition: transform 0.3s ease; /* Transición suave al cargar */
            z-index: 10; /* Asegura que el formulario esté por encima del fondo */
            position: relative; /* Para que z-index funcione */

            /* Eliminados los estilos de imagen de fondo de aquí */
            background-image: none;
            background-repeat: initial;
            background-position: initial;
            background-size: initial;
            background-blend-mode: initial;
        }
        .registration-container:hover {
            transform: translateY(-5px); /* Efecto sutil al pasar el ratón */
        }
        /* Título del formulario - Ajuste de tamaño de fuente responsivo (más pequeño) */
        .form-title {
            color: #0d3b66; /* Azul marino profundo y elegante */
            margin-bottom: 0.8rem; /* Espacio reducido */
            letter-spacing: -0.03em; /* Ajuste para un look más moderno */
            font-size: 1.5rem; /* Tamaño un poco más pequeño para el título principal */
        }
        @media (min-width: 640px) {
            .form-title {
                font-size: 2rem;
            }
        }
        @media (min-width: 768px) {
            .form-title {
                font-size: 2.25rem; /* Tamaño para escritorio */
            }
        }

        /* Descripción del formulario (eslogan) */
        .form-description {
            color: #800020; /* Vinotinto para el eslogan */
            margin-bottom: 2rem; /* Más espacio debajo del eslogan */
            font-size: 1.25rem; /* Ligeramente más grande */
            font-weight: 700; /* Más negrita, más refinado */
            font-family: 'Georgia', serif; /* Fuente diferente para el eslogan */
            font-style: italic; /* Opcional: para darle un toque más distintivo */
        }
        @media (min-width: 640px) {
            .form-description {
                font-size: 1.35rem;
            }
        }
        @media (min-width: 768px) {
            .form-description {
                font-size: 1.5rem;
            }
        }

        /* Estilos para los grupos de formulario (etiqueta + input/select) */
        .form-group {
            margin-bottom: 1.5rem; /* Más espacio entre grupos */
            text-align: left;
        }
        /* Estilos para las etiquetas */
        .form-label {
            display: block;
            font-weight: 600;
            color: #2c3e50; /* Gris azulado oscuro para las etiquetas */
            margin-bottom: 0.5rem; /* Ligeramente más de espacio */
            font-size: 0.9rem; /* Un poco más pequeño para un look más limpio */
        }
        /* Estilos para los campos de entrada de texto y select */
        .form-input, .form-select {
            width: 100%;
            padding: 0.8rem 1rem; /* Más padding para un toque más premium */
            border: 1px solid #c0ccda; /* Borde plateado suave */
            border-radius: 0.75rem; /* Esquinas más redondeadas */
            font-size: 0.95rem;
            color: #1a202c; /* Texto oscuro */
            background-color: #fcfdff; /* Fondo casi blanco para los inputs */
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
            box-sizing: border-box;
            -webkit-appearance: none; /* Para personalizar el select en WebKit */
            -moz-appearance: none; /* Para personalizar el select en Firefox */
            appearance: none; /* Elimina estilos por defecto del select */
        }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #007bff; /* Azul primario al enfocar */
            box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.2); /* Sombra azul más suave y extendida al enfocar */
        }
        /* Flecha personalizada para el select */
        .form-group select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23333' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 0.8rem 0.8rem;
            padding-right: 2.5rem; /* Espacio para la flecha */
        }

        /* Estilos para el botón de envío */
        .submit-button {
            display: inline-block;
            /* Gradiente de vinotinto para el botón */
            background: linear-gradient(90deg, #800020 0%, #a02040 100%); /* Tonos de vinotinto */
            color: #ffffff;
            padding: 1rem 2.8rem; /* Más padding para un botón más grande */
            border-radius: 9999px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.15rem; /* Texto más grande */
            border: none;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            box-shadow: 0 10px 20px rgba(128, 0, 32, 0.35); /* Sombra más pronunciada en tono vinotinto */
        }
        .submit-button:hover {
            transform: translateY(-3px); /* Efecto de "levantamiento" más notorio */
            background: linear-gradient(90deg, #a02040 0%, #800020 100%); /* Invertir gradiente al pasar el ratón */
            box-shadow: 0 15px 25px rgba(128, 0, 32, 0.5); /* Sombra más grande y difuminada en tono vinotinto */
        }
        /* Estilos para el mensaje de confirmación */
        .confirmation-message {
            margin-top: 1.8rem;
            padding: 1.1rem;
            background-color: #e6ffe6; /* Verde muy claro */
            color: #28a745; /* Verde de éxito */
            border-radius: 0.75rem;
            display: none;
            font-weight: 600;
            border: 1px solid #a3e6a3; /* Borde sutil */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        /* Estilos para el mensaje de error */
        .error-message {
            margin-top: 0.5rem;
            color: #dc3545; /* Rojo estándar para errores */
            font-size: 0.875rem;
            text-align: left;
            display: none;
            font-weight: 500;
        }
        /* Estilos para el mensaje de carga */
        .loading-message {
            margin-top: 1.8rem;
            padding: 1.1rem;
            background-color: #e0f2fe; /* Azul claro para carga */
            color: #0c4a6e;
            border-radius: 0.75rem;
            display: none;
            font-weight: 600;
            border: 1px solid #90cdf4;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        /* Estilos para la sección de detalles de pago */
        .payment-details-section {
            background-color: #f8f9fa; /* Fondo plateado muy claro */
            border: 1px solid #e9ecef; /* Borde plateado suave */
            border-radius: 1rem; /* Más redondeado */
            padding: 1.8rem; /* Más padding */
            margin-top: 1.8rem;
            margin-bottom: 1.8rem;
            box-sizing: border-box;
            box-shadow: inset 0 1px 5px rgba(0,0,0,0.03); /* Sombra interna sutil */
        }
        .payment-details-section h3 {
            font-size: 1.25rem; /* Subtítulo más grande */
            font-weight: 700;
            color: #0d3b66; /* Azul oscuro para subtítulos */
            margin-bottom: 1rem;
        }
        .payment-details-section ul {
            padding-left: 1.2rem;
            list-style: none; /* Eliminar viñetas por defecto */
        }
        .payment-details-section ul li {
            margin-bottom: 0.6rem; /* Más espacio entre ítems de lista */
            color: #333333;
            font-size: 0.9rem; /* Ligeramente más pequeño */
            line-height: 1.3; /* Mejor legibilidad */
        }
        /* Estilos para la sección de información del evento */
        .event-info-section {
            background-color: #800020; /* Color vinotinto */
            border-radius: 1.5rem; /* Esquinas más redondeadas */
            padding: 1.2rem; /* Padding ajustado */
            margin-bottom: 2rem;
            text-align: left;
            box-shadow: inset 0 1px 4px rgba(0,0,0,0.04); /* Sombra interna sutil */
            color: #ffffff; /* Texto blanco para contraste */
        }
        .event-info-section h2 {
            font-size: 1.4rem; /* Título de sección más pequeño */
            font-weight: 700;
            color: #ffffff; /* Título blanco para contraste */
            margin-bottom: 1rem; /* Menos espacio */
            text-align: center;
        }
        .event-info-section ul {
            list-style: none;
            padding-left: 0;
        }
        .event-info-section ul li {
            margin-bottom: 0.6rem; /* Espacio entre ítems */
            color: #ffffff; /* Texto blanco para contraste */
            font-size: 0.95rem; /* Tamaño de fuente */
            display: flex;
            align-items: flex-start;
            line-height: 1.3;
        }
        .event-info-section ul li i {
            margin-right: 0.8rem; /* Espacio para el icono */
            color: #ffffff; /* Iconos blancos para contraste */
            font-size: 1.2rem; /* Tamaño de icono */
            flex-shrink: 0;
            padding-top: 0.1rem;
        }
    </style>
</head>
<body>
    <div class="registration-container">
        <!-- Logo en la parte superior de la página -->
        <img src="logos postgrado.png" alt="Logos Postgrado" class="mx-auto mb-6 h-20 object-contain">

        <h1 class="form-title font-extrabold">Jornada de Actualización en Patología de Columna</h1>
        <p class="text-lg font-semibold text-gray-600 mb-2">28 años de la Unidad de Cirugía de Columna</p>
        <p class="text-lg font-semibold text-gray-600 mb-2">18 años del Postgrado de Cirugía de Columna</p>
        <p class="text-lg font-semibold text-gray-600 mb-2">Hospital Universitario "Dr. Manuel Núñez Tovar"</p>
        <p class="form-description font-bold">"Dominando el Trauma Espinal"</p>

        <!-- Sección de Información del Evento -->
        <div class="event-info-section">
            <h2>Detalles del Evento</h2>
            <ul>
                <li><i class="fas fa-calendar-alt"></i> <strong>Fecha:</strong> 16 de agosto del 2025</li>
                <li><i class="fas fa-map-marker-alt"></i> <strong>Lugar:</strong> Auditorio Juana Ramírez La Avanzadora - Edificio PDVSA - ESEM, Maturín - estado Monagas</li>
                <li><i class="fas fa-clock"></i> <strong>Apertura:</strong> 8:00 am</li>
                <li><i class="fas fa-id-card"></i> <strong>Acreditación:</strong> 15 de agosto, 4to piso, HUMNT - Cirugía de Columna<br>(Hora: 8:00 am - 1:00 pm)</li>
                <li><i class="fas fa-phone"></i> <strong>Contactos:</strong> 0414-3943494 / 0424 - 9178903</li>
            </ul>
        </div>
        <!-- Fin de la Sección de Información del Evento -->

        <form id="registrationForm" class="mt-8" method="POST">
            <div class="form-group">
                <label for="fullName" class="form-label">Nombre y Apellido</label>
                <input type="text" id="fullName" name="fullName" class="form-input" placeholder="Ej: Juan Pérez" required>
                <p id="fullNameError" class="error-message">Por favor, ingresa tu nombre y apellido.</p>
            </div>

            <div class="form-group">
                <label for="idNumber" class="form-label">Número de Cédula de Identidad</label>
                <input type="text" id="idNumber" name="idNumber" class="form-input" placeholder="Ej: V-12345678" required>
                <p id="idNumberError" class="error-message">Por favor, ingresa tu número de cédula.</p>
            </div>

            <div class="form-group">
                <label for="phone" class="form-label">Número de Teléfono</label>
                <input type="tel" id="phone" name="phone" class="form-input" placeholder="Ej: +58 412 1234567" required>
                <p id="phoneError" class="error-message">Por favor, ingresa tu número de teléfono.</p>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">Correo Electrónico</label>
                <input type="email" id="email" name="email" class="form-input" placeholder="tu.email@ejemplo.com" required>
                <p id="emailError" class="error-message">Por favor, ingresa un correo electrónico válido.</p>
            </div>

            <div class="form-group">
                <label for="role" class="form-label">Tipo de Participante</label>
                <select id="role" name="role" class="form-select" required>
                    <option value="">Selecciona una opción</option>
                    <option value="Estudiante">Estudiante</option>
                    <option value="Residente">Residente</option>
                    <option value="Especialista">Especialista</option>
                    <option value="Otro">Otro</option>
                </select>
                <p id="roleError" class="error-message">Por favor, selecciona tu tipo de participante.</p>
            </div>

            <!-- Sección de Modalidad de Pago -->
            <div class="form-group">
                <label for="paymentMethod" class="form-label">Modalidad de Pago</label>
                <select id="paymentMethod" name="paymentMethod" class="form-select" required>
                    <option value="">Selecciona una modalidad</option>
                    <option value="Pago Móvil">Pago Móvil</option>
                    <option value="Transferencia">Transferencia</option>
                    <option value="Efectivo">Efectivo</option>
                </select>
                <p id="paymentMethodError" class="error-message">Por favor, selecciona una modalidad de pago.</p>
            </div>

            <!-- Detalles de Pago (se mostrarán condicionalmente) -->
            <div id="paymentDetailsSection" class="payment-details-section hidden">
                <h3 class="text-xl font-bold mb-4">Datos para el Pago</h3>

                <!-- Detalles para Pago Móvil -->
                <div id="pagoMovilDetails" class="hidden">
                    <p class="text-gray-700 mb-4">
                        <strong>Pago Móvil:</strong> Banco Banesco (0134) 04143943494 C.I. V - 10835672
                    </p>
                    <p class="text-gray-800 font-semibold mb-2">Monto: 1.500,00 Bs</p>
                    <div class="form-group">
                        <label for="pagoMovilReference" class="form-label">Número de Referencia Pago Móvil</label>
                        <input type="text" id="pagoMovilReference" name="pagoMovilReference" class="form-input" placeholder="Ej: 1234567890" required>
                        <p id="pagoMovilReferenceError" class="error-message">Por favor, ingresa la referencia del pago móvil.</p>
                    </div>
                </div>

                <!-- Detalles para Transferencia -->
                <div id="transferDetails" class="hidden">
                    <p class="text-gray-700 mb-4">Realiza tu transferencia a los siguientes datos:</p>
                    <ul class="text-gray-800 text-left mb-4 list-disc list-inside">
                        <li><strong>A nombre de:</strong> Olga Morillo</li>
                        <li><strong>Cédula:</strong> V-10.835.672</li>
                        <li><strong>Banco:</strong> Banesco</li>
                        <li><strong>Tipo de Cuenta:</strong> Corriente</li>
                        <li><strong>N° de cuenta:</strong> 0134-0459-3345-9103-8274</li>
                        <li><strong>Monto:</strong> 1.500,00 Bs</li>
                    </ul>
                    <div class="form-group">
                        <label for="transferReference" class="form-label">Número de Referencia de Transferencia</label>
                        <input type="text" id="transferReference" name="transferReference" class="form-input" placeholder="Ej: 000123456789" required>
                        <p id="transferReferenceError" class="error-message">Por favor, ingresa la referencia de la transferencia.</p>
                    </div>
                </div>

                <!-- Detalles para Efectivo -->
                <div id="cashDetails" class="hidden">
                    <p class="text-gray-700 mb-4">
                        El pago en efectivo debe realizarse una semana antes del evento.
                    </p>
                    <ul class="text-gray-800 text-left mb-4 list-disc list-inside">
                        <li><i class="fas fa-calendar-alt"></i> <strong>Fecha del evento:</strong> 16 de agosto del 2025</li>
                        <li><i class="fas fa-calendar-check"></i> <strong>Fecha límite de pago en efectivo:</strong> 9 de agosto del 2025</li>
                        <li><i class="fas fa-clock"></i> <strong>Inicio:</strong> 7:30 am</li>
                    </ul>
                    <p class="text-gray-800 font-semibold mb-2">Monto a cancelar: 1.500,00 Bs</p>
                    <p class="text-sm text-gray-500 mt-2">
                        La **Acreditación y Retiro de Materiales** (carpetas, bolígrafos y distintivos) se realizará el día antes del evento.
                        Por favor, ten el monto exacto para agilizar el proceso.
                    </p>
                </div>
            </div>

            <button type="submit" class="submit-button">Enviar Registro</button>
        </form>

        <div id="loadingMessage" class="loading-message">
            <i class="fas fa-spinner fa-spin mr-2"></i> Enviando tu registro...
        </div>
        <div id="confirmationMessage" class="confirmation-message">
            <i class="fas fa-check-circle mr-2"></i> ¡Gracias por registrarte! Hemos recibido tu información.
        </div>
        <div id="submissionErrorMessage" class="error-message">
            <i class="fas fa-exclamation-circle mr-2"></i> Hubo un error al enviar tu registro. Por favor, inténtalo de nuevo.
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const registrationForm = document.getElementById('registrationForm');
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paymentDetailsSection = document.getElementById('paymentDetailsSection');
            const pagoMovilDetails = document.getElementById('pagoMovilDetails');
            const transferDetails = document.getElementById('transferDetails');
            const cashDetails = document.getElementById('cashDetails');

            const pagoMovilReferenceInput = document.getElementById('pagoMovilReference');
            const transferReferenceInput = document.getElementById('transferReference');

            const pagoMovilReferenceError = document.getElementById('pagoMovilReferenceError');
            const transferReferenceError = document.getElementById('transferReferenceError');

            // Función para mostrar/ocultar secciones de detalles de pago
            function showPaymentDetails() {
                const selectedMethod = paymentMethodSelect.value;

                // Ocultar todas las secciones y sus errores
                paymentDetailsSection.classList.add('hidden');
                pagoMovilDetails.classList.add('hidden');
                transferDetails.classList.add('hidden');
                cashDetails.classList.add('hidden');

                // Asegurarse de que los campos de referencia no sean requeridos por defecto
                pagoMovilReferenceInput.removeAttribute('required');
                transferReferenceInput.removeAttribute('required');

                // Limpiar errores visuales
                pagoMovilReferenceInput.classList.remove('border-red-500');
                transferReferenceInput.classList.remove('border-red-500');
                pagoMovilReferenceError.style.display = 'none';
                transferReferenceError.style.display = 'none';

                if (selectedMethod) {
                    paymentDetailsSection.classList.remove('hidden');
                    if (selectedMethod === 'Pago Móvil') {
                        pagoMovilDetails.classList.remove('hidden');
                        pagoMovilReferenceInput.setAttribute('required', 'required'); // Hacer requerido solo si es Pago Móvil
                    } else if (selectedMethod === 'Transferencia') {
                        transferDetails.classList.remove('hidden'); // Asegúrate de que esta línea esté presente
                        transferReferenceInput.setAttribute('required', 'required'); // Hacer requerido solo si es Transferencia
                    } else if (selectedMethod === 'Efectivo') {
                        cashDetails.classList.remove('hidden');
                        // No hay campo de referencia para efectivo, no se marca como requerido
                    }
                }
            }

            // Escuchar cambios en la selección de modalidad de pago
            paymentMethodSelect.addEventListener('change', showPaymentDetails);

            // Inicializar la visibilidad al cargar la página (en caso de recarga con valor seleccionado)
            showPaymentDetails();

            registrationForm.addEventListener('submit', async function(event) {
                event.preventDefault(); // Evita el envío por defecto del formulario

                // Ocultar mensajes previos
                document.getElementById('confirmationMessage').style.display = 'none';
                document.getElementById('submissionErrorMessage').style.display = 'none';
                document.getElementById('loadingMessage').style.display = 'none';

                // Resetear estilos de error
                const errorMessages = document.querySelectorAll('.error-message');
                errorMessages.forEach(msg => msg.style.display = 'none');
                const formInputs = document.querySelectorAll('.form-input, .form-select');
                formInputs.forEach(input => input.classList.remove('border-red-500'));

                const fullNameInput = document.getElementById('fullName');
                const idNumberInput = document.getElementById('idNumber');
                const phoneInput = document.getElementById('phone');
                const emailInput = document.getElementById('email');
                const roleSelect = document.getElementById('role');

                let isValid = true;

                // Validaciones de campos comunes
                if (fullNameInput.value.trim() === '') {
                    document.getElementById('fullNameError').style.display = 'block';
                    fullNameInput.classList.add('border-red-500');
                    isValid = false;
                }
                if (idNumberInput.value.trim() === '') {
                    document.getElementById('idNumberError').style.display = 'block';
                    idNumberInput.classList.add('border-red-500');
                    isValid = false;
                }
                if (phoneInput.value.trim() === '') {
                    document.getElementById('phoneError').style.display = 'block';
                    phoneInput.classList.add('border-red-500');
                    isValid = false;
                }
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(emailInput.value.trim())) {
                    document.getElementById('emailError').style.display = 'block';
                    emailInput.classList.add('border-red-500');
                    isValid = false;
                }
                if (roleSelect.value === '') {
                    document.getElementById('roleError').style.display = 'block';
                    roleSelect.classList.add('border-red-500');
                    isValid = false;
                }
                if (paymentMethodSelect.value === '') {
                    document.getElementById('paymentMethodError').style.display = 'block';
                    paymentMethodSelect.classList.add('border-red-500');
                    isValid = false;
                }

                // Validaciones específicas según la modalidad de pago
                const selectedMethod = paymentMethodSelect.value;
                let transactionReference = ''; // Variable para almacenar la referencia

                if (selectedMethod === 'Pago Móvil') {
                    if (pagoMovilReferenceInput.value.trim() === '') {
                        pagoMovilReferenceError.style.display = 'block';
                        pagoMovilReferenceInput.classList.add('border-red-500');
                        isValid = false;
                    } else {
                        transactionReference = pagoMovilReferenceInput.value.trim();
                    }
                } else if (selectedMethod === 'Transferencia') {
                    if (transferReferenceInput.value.trim() === '') {
                        transferReferenceError.style.display = 'block';
                        transferReferenceInput.classList.add('border-red-500');
                        isValid = false;
                    } else {
                        transactionReference = transferReferenceInput.value.trim();
                    }
                }
                // Para Efectivo, transactionReference se mantiene vacío, lo cual es correcto.

                if (isValid) {
                    document.getElementById('loadingMessage').style.display = 'block'; // Mostrar mensaje de carga
                    const formData = new FormData();
                    formData.append('fullName', fullNameInput.value);
                    formData.append('idNumber', idNumberInput.value);
                    formData.append('phone', phoneInput.value);
                    formData.append('email', emailInput.value);
                    formData.append('role', roleSelect.value);
                    formData.append('paymentMethod', paymentMethodSelect.value); // Nueva modalidad de pago
                    formData.append('transactionReference', transactionReference); // Referencia de transacción (vacío si es efectivo)

                    try {
                        // !!! IMPORTANTE: REEMPLAZA ESTA URL CON LA URL DE TU GOOGLE APPS SCRIPT DESPLEGADO !!!
                        const scriptUrl = 'https://script.google.com/macros/s/AKfycbzobpnUJcTIFOKo1QXc3gwO2YkHhVnEM1vC5BlywZSoixPMCfnguUFEcmqW4aerRvu7dg/exec';
                        const response = await fetch(scriptUrl, {
                            method: 'POST',
                            body: formData
                        });

                        const result = await response.json();

                        document.getElementById('loadingMessage').style.display = 'none'; // Ocultar mensaje de carga

                        if (result.status === 'success') {
                            document.getElementById('confirmationMessage').style.display = 'block';
                            registrationForm.reset(); // Limpiar formulario
                            showPaymentDetails(); // Resetear visibilidad de campos de pago
                        } else {
                            document.getElementById('submissionErrorMessage').textContent = 'Error: ' + (result.message || 'Hubo un problema al procesar tu registro.');
                            document.getElementById('submissionErrorMessage').style.display = 'block';
                        }
                    } catch (error) {
                        console.error('Error al enviar el formulario:', error);
                        document.getElementById('loadingMessage').style.display = 'none';
                        document.getElementById('submissionErrorMessage').textContent = 'Error de conexión. Por favor, inténtalo de nuevo.';
                        document.getElementById('submissionErrorMessage').style.display = 'block';
                    }
                }
            });
        });
    </script>
</body>
</html>
